(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{316:function(e,t,n){"use strict";n.r(t);n(573);t.default="Viewing.Extension.PieChart"},329:function(e,t,n){"use strict";var i=n(13),o=n(22),a=n(4),r=n(5),s=n(8),c=n(7),l=n(326),d=n(9),u=n(2),h=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).onModelCompletedLoad=n.onModelCompletedLoad.bind(Object(u.a)(Object(u.a)(n))),n.onObjectTreeCreated=n.onObjectTreeCreated.bind(Object(u.a)(Object(u.a)(n))),n.onModelRootLoaded=n.onModelRootLoaded.bind(Object(u.a)(Object(u.a)(n))),n.onExtensionLoaded=n.onExtensionLoaded.bind(Object(u.a)(Object(u.a)(n))),n.onModelActivated=n.onModelActivated.bind(Object(u.a)(Object(u.a)(n))),n.onGeometryLoaded=n.onGeometryLoaded.bind(Object(u.a)(Object(u.a)(n))),n.onToolbarCreated=n.onToolbarCreated.bind(Object(u.a)(Object(u.a)(n))),n.onModelBeginLoad=n.onModelBeginLoad.bind(Object(u.a)(Object(u.a)(n))),n.onModelUnloaded=n.onModelUnloaded.bind(Object(u.a)(Object(u.a)(n))),n.onSelection=n.onSelection.bind(Object(u.a)(Object(u.a)(n))),n.__onLoadNodeProperties=n.__onLoadNodeProperties.bind(Object(u.a)(Object(u.a)(n))),n.__onModelRootLoaded=n.__onModelRootLoaded.bind(Object(u.a)(Object(u.a)(n))),n.__onModelActivated=n.__onModelActivated.bind(Object(u.a)(Object(u.a)(n))),n.__onModelUnloaded=n.__onModelUnloaded.bind(Object(u.a)(Object(u.a)(n))),n.__onModelLoaded=n.__onModelLoaded.bind(Object(u.a)(Object(u.a)(n))),n.models=e.impl.modelQueue().getModels(),n.defaultOptions=r,n.options=Object(o.a)({},r,i),n.react=n.options.react,n.viewer=e,n.initializeEvents(),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"load",value:function(){return this.options.contextMenu&&this.onContextMenu&&this.options.contextMenu.addHandler(this.onContextMenu),!0}},{key:"unload",value:function(){var e=this;return this.options.contextMenu&&this.onContextMenu&&this.options.contextMenu.removeHandler(this.onContextMenu),this.viewerEvents.forEach(function(t){e.viewer.removeEventListener(t.id,e[t.handler])}),this.eventSink&&(this.eventSink.off("MetaProperties:loadNodeProperties",this.__onLoadNodeProperties),this.eventSink.off("model.activated",this.__onModelActivated),this.eventSink.off("model.unloaded",this.__onModelUnloaded),this.eventSink.off("model.loaded",this.__onModelLoaded)),this.off(),!0}},{key:"onExtensionLoaded",value:function(e){}},{key:"onModelBeginLoad",value:function(e){}},{key:"onModelActivated",value:function(e){}},{key:"__onModelRootLoaded",value:function(e){var t=this;this.viewerEvent([Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT]).then(function(e){t.onModelCompletedLoad(e[0])})}},{key:"onModelRootLoaded",value:function(e){}},{key:"onObjectTreeCreated",value:function(e){}},{key:"onGeometryLoaded",value:function(e){}},{key:"onModelCompletedLoad",value:function(e){}},{key:"onToolbarCreated",value:function(e){}},{key:"onModelUnloaded",value:function(e){}},{key:"onSelection",value:function(e){}},{key:"__onLoadNodeProperties",value:function(e){var t=e.dbId,n=e.properties;if(this.onLoadNodeProperties)return this.onLoadNodeProperties(t,n)}},{key:"__onModelLoaded",value:function(e){this.models=Object(i.a)(this.models).concat([e.model]),this.onModelBeginLoad(e)}},{key:"__onModelActivated",value:function(e){this.onModelActivated(e)}},{key:"__onModelUnloaded",value:function(e){this.models=this.models.filter(function(t){return t.guid!==e.model.guid}),this.onModelUnloaded(e)}},{key:"initializeEvents",value:function(){var e=this;this.options.eventSink&&(this.eventSink=this.options.eventSink,this.eventSink.on("MetaProperties:loadNodeProperties",this.__onLoadNodeProperties),this.eventSink.on("model.loaded",this.__onModelLoaded),this.eventSink.on("model.activated",this.__onModelActivated),this.eventSink.on("model.unloaded",this.__onModelUnloaded)),this.viewerEvents=[{id:Autodesk.Viewing.EXTENSION_LOADED_EVENT,handler:"onExtensionLoaded"},{id:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,handler:"onObjectTreeCreated"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"__onModelRootLoaded"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"onModelRootLoaded"},{id:Autodesk.Viewing.GEOMETRY_LOADED_EVENT,handler:"onGeometryLoaded"},{id:Autodesk.Viewing.TOOLBAR_CREATED_EVENT,handler:"onToolbarCreated"}],this.options.controlledSelection||this.viewerEvents.push({id:Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,handler:"onSelection"}),this.viewerEvents.forEach(function(t){e.viewerEvent(t.id,e[t.handler])})}},{key:"viewerEvent",value:function(e,t){var n=this;if(!t){var i=(Array.isArray(e)?e:[e]).map(function(e){return new Promise(function(t){n.viewer.addEventListener(e,function i(o){n.viewer.removeEventListener(e,i),t(o)})})});return Promise.all(i)}this.viewer.addEventListener(e,t)}},{key:"emit",value:function(e,n){return this.options.eventSink?this.options.eventSink.emit(e,n):Object(l.a)(Object(c.a)(t.prototype),"emit",this).call(this,e,n)}},{key:"emitAcc",value:function(e,n){return this.options.eventSink?this.options.eventSink.emitAcc(e,n):Object(l.a)(Object(c.a)(t.prototype),"emitAcc",this).call(this,e,n)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.MultiModelExtensionBase"}}]),t}(n(30).a.Composer(Autodesk.Viewing.Extension));t.a=h},334:function(e,t,n){var i=n(335);"string"===typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(21)(i,o);i.locals&&(e.exports=i.locals)},335:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".widget-container {\n  position: relative;\n  height: 100%;\n  width: 100%; }\n\n.widget-container > .title {\n  border-bottom: 1px solid #cdcdcd;\n  background-color: #f5f5f5;\n  padding-right: 10px;\n  color: black;\n  position: relative;\n  overflow: hidden;\n  text-align: left;\n  height: 40px;\n  width: 100%; }\n\n.widget-container > .title > label {\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px; }\n\n.widget-container > .content {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%; }\n",""])},337:function(e,t,n){"use strict";var i=n(13),o=n(4),a=n(5),r=n(8),s=n(7),c=n(9),l=n(6),d=(n(334),n(0)),u=n.n(d),h=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"renderTitle",value:function(){return this.props.showTitle?this.props.renderTitle?this.props.renderTitle():u.a.createElement("div",{className:"title"},u.a.createElement("label",null,this.props.title)):u.a.createElement("div",null)}},{key:"renderChildren",value:function(){var e=this;return this.props.dimensions?u.a.Children.map(this.props.children,function(t){var n=Object.assign({},t.props,{dimensions:e.props.dimensions});return u.a.cloneElement(t,n)}):this.props.children}},{key:"render",value:function(){var e=["widget-container"].concat(Object(i.a)(this.props.className.split(" "))),t=this.props.showTitle?"calc(100% - 40px)":"100%";return u.a.createElement("div",{className:e.join(" "),style:this.props.style},this.renderTitle(),u.a.createElement("div",{className:"content",style:{height:t}},this.renderChildren()))}}]),t}(u.a.PureComponent);Object(l.a)(h,"defaultProps",{showTitle:!0,className:""});var p=h;t.a=p},479:function(e,t){},573:function(e,t,n){"use strict";(function(e){var t=n(3),i=n.n(t),o=n(10),a=n(4),r=n(5),s=n(8),c=n(7),l=n(326),d=n(9),u=n(2),h=n(329),p=n(395),v=n.n(p),f=n(389),m=n.n(f),b=n(337),g=(n(574),n(443)),O=n.n(g),y=n(342),k=n.n(y),M=n(752),w=n(46),E=n(0),x=n.n(E),j=n(405),T=n.n(j),C=n(41),_=function(t){function n(e,t){var i;return Object(a.a)(this,n),(i=Object(s.a)(this,Object(c.a)(n).call(this,e,t))).toggleTheming=i.toggleTheming.bind(Object(u.a)(Object(u.a)(i))),i.onStopResize=i.onStopResize.bind(Object(u.a)(Object(u.a)(i))),i.renderTitle=i.renderTitle.bind(Object(u.a)(Object(u.a)(i))),i.render=i.render.bind(Object(u.a)(Object(u.a)(i))),document.addEventListener("visibilitychange",i.onTabActivated),i.react=t.react,i}return Object(d.a)(n,t),Object(r.a)(n,[{key:"load",value:function(){var e=this;return this.react.setState({activeProperty:"",showLoader:!0,disabled:!0,items:[],data:[]}).then(function(){e.react.pushRenderExtension(e);var t=e.viewer.activeModel||e.viewer.model;t&&e.loadChart(t)}),this.viewer.loadDynamicExtension("Viewing.Extension.ContextMenu",{buildMenu:function(t){return t.map(function(t){return"show all objects"===t.title.toLowerCase()?{title:"Show All objects",target:function(){e.viewer.isolate(),e.viewer.fitToView()}}:t})}}),console.log("Viewing.Extension.PieChart loaded"),!0}},{key:"unload",value:function(){return console.log("Viewing.Extension.PieChart unloaded"),this.react.getState().theming&&this.toggleTheming(),this.react.popRenderExtension(this),Object(l.a)(Object(c.a)(n.prototype),"unload",this).call(this),!0}},{key:"loadChart",value:function(){var t=Object(o.a)(i.a.mark(function t(n){var o,a,r,s=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.react.setState({showLoader:!0});case 2:if(n.getData().instanceTree){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,Object(C.b)(n);case 6:if(this.componentIds=t.sent,t.t0=this.options.chartProperties,t.t0){t.next=12;break}return t.next=11,Object(C.c)(this.viewer,this.componentIds,n);case 11:t.t0=t.sent;case 12:return this.chartProperties=t.t0,e("#pie-chart-dropdown").parent().find("ul").css({height:Math.min(e(".pie-chart").height()-42,26*this.chartProperties.length+16)}),o=this.chartProperties.map(function(e){return"string"===typeof e?e:e.name}),t.next=17,this.react.setState({items:o});case 17:return this.setActiveProperty(this.chartProperties[this.options.defaultIndex||0]),t.next=20,Object(C.a)(n,this.componentIds);case 20:a=t.sent,this.fragIdToMaterial={},r=this.viewer.model.getFragmentList(),a.forEach(function(e){var t=r.getMaterial(e);t&&(s.fragIdToMaterial[e]=t)});case 24:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onModelActivated",value:function(e){"model.loaded"!==e.source&&this.loadChart(e.model)}},{key:"onModelCompletedLoad",value:function(e){this.loadChart(e.model)}},{key:"toggleTheming",value:function(){var e=this,t=this.react.getState(),n=!t.theming;if(this.react.setState({theming:n}),n)t.data.forEach(function(t){t.dbIds.forEach(function(n){var i=e.viewer.activeModel||e.viewer.model;Object(C.i)(i,n,t.material)})});else for(var i in this.fragIdToMaterial){var o=this.fragIdToMaterial[i];(this.viewer.activeModel||this.viewer.model).getFragmentList().setMaterial(i,o)}this.viewer.impl.invalidate(!0,!1,!1)}},{key:"setActiveProperty",value:function(){var e=Object(o.a)(i.a.mark(function e(t,n){var o,a,r,s,c=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.react.getState(),a=t.name||t,e.next=4,this.react.setState({activeProperty:n?a:"",disabled:n,showLoader:!0});case 4:return r=t.properties||[t],e.next=7,this.buildPropertyData(r);case 7:return s=e.sent,e.next=10,this.react.setState({activeProperty:a,showLoader:!1,guid:this.guid(),disabled:!1,data:s});case 10:o.theming&&(s.forEach(function(e){e.dbIds.forEach(function(t){var n=c.viewer.activeModel||c.viewer.model;Object(C.i)(n,t,e.material)})}),this.viewer.impl.invalidate(!0,!1,!1));case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createMaterial",value:function(e){var t=parseInt(e.replace("#",""),16),n={shading:THREE.FlatShading,name:this.guid(),specular:t,shininess:0,emissive:0,diffuse:0,color:t},i=new THREE.MeshPhongMaterial(n);return this.viewer.impl.matman().addMaterial(n.name,i,!0),i}},{key:"groupMap",value:function(e,t,n,i){return O()(e,function(e,o,a){100*o.length/n<i?e[t]=(e[t]||[]).concat(o):e[a]=o})}},{key:"buildPropertyData",value:function(){var e=Object(o.a)(i.a.mark(function e(t){var n,o,a,r,s,c,l,d,u,h=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.viewer.activeModel||this.viewer.model,o={},a=0;case 3:if(!(a<t.length)){e.next=11;break}return e.next=6,Object(C.g)(n,t[a],this.componentIds);case 6:r=e.sent,Object.assign(o,r);case 8:++a,e.next=3;break;case 11:for(s in o)(!s.length||s.indexOf("<")>-1)&&delete o[s];return c=this.groupMap(o,"Other",this.componentIds.length,2),l=Object.keys(c),d=T.a.scale.linear().domain([0,.33*l.length,.66*l.length,l.length]).range(["#FCB843","#C2149F","#0CC4BD","#0270E9"]),u=l.map(function(e,t){var n=c[e],i=d(t),o=100*n.length/h.componentIds.length;return{label:"".concat(e,": ").concat(o.toFixed(2),"% (").concat(n.length,")"),material:h.createMaterial(i),value:n.length,shortLabel:e,percent:o,dbIds:n,color:i,key:e}}),e.abrupt("return",k()(u,function(e){return-1*e.value}));case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onStopResize",value:function(){var t=this.react.getState();e("#pie-chart-dropdown").parent().find("ul").css({height:Math.min(e(".pie-chart").height()-42,26*t.items.length+16)})}},{key:"renderTitle",value:function(){var e=this,t=this.react.getState(),n=t.items.map(function(t,n){return x.a.createElement(m.a,{eventKey:n,key:n,onClick:function(){var t=e.chartProperties[n];e.setActiveProperty(t,!0)}},t)}),i={color:t.theming?"#FF0000":"#9b9b9b"};return x.a.createElement("div",{className:"title controls"},x.a.createElement("label",null,this.options.title||"Pie Chart"),x.a.createElement(v.a,{title:"Property: "+t.activeProperty,disabled:t.disabled,key:"pie-chart-dropdown",id:"pie-chart-dropdown"},n),x.a.createElement("button",{onClick:this.toggleTheming,disabled:t.disabled,title:"color theming"},x.a.createElement("span",{className:"fa fa-paint-brush",style:i})))}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showTitle:!0},n=this.react.getState();return x.a.createElement(b.a,{renderTitle:this.renderTitle,showTitle:t.showTitle,className:this.className},x.a.createElement(w.a,{show:n.showLoader}),x.a.createElement(M.a,{onSegmentClicked:function(t,n){var i=n?[]:t.dbIds;e.viewer.isolate(i),e.options.fitToView&&e.viewer.fitToView()},dataGuid:n.guid,data:n.data}))}},{key:"className",get:function(){return"pie-chart"}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.PieChart"}}]),n}(h.a);Autodesk.Viewing.theExtensionManager.registerExtension(_.ExtensionId,_)}).call(this,n(18))},574:function(e,t,n){var i=n(575);"string"===typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(21)(i,o);i.locals&&(e.exports=i.locals)},575:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".pie-chart {\n  background: #fdfdfd; }\n  .pie-chart .title {\n    position: relative !important;\n    overflow: visible;\n    float: left; }\n  .pie-chart .title > label {\n    white-space: nowrap;\n    font-weight: normal;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    margin-left: 27px;\n    select: none;\n    width: 85px; }\n  .pie-chart .title > .dropdown {\n    position: relative;\n    top: -1px; }\n  .pie-chart .title > button {\n    margin-left: 4px;\n    height: 26px; }\n  .pie-chart .title > .dropdown > button {\n    padding: 2px 12px;\n    height: 26px; }\n  .pie-chart .title .dropdown-menu {\n    overflow: scroll; }\n  .pie-chart .loader-background {\n    background: #fdfdfd; }\n  .pie-chart .loader,\n  .pie-chart .loader:before,\n  .pie-chart .loader:after {\n    top: 35%; }\n  .pie-chart .loader:before,\n  .pie-chart .loader:after {\n    margin: -9px auto; }\n",""])},615:function(e,t,n){var i=n(616);"string"===typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(21)(i,o);i.locals&&(e.exports=i.locals)},616:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".react-pie {\n  height: 100%;\n  width: 100%; }\n  .react-pie .react-pie-inner {\n    height: 100%;\n    width: 100%; }\n    .react-pie .react-pie-inner svg {\n      height: 100%;\n      width: 100%; }\n      .react-pie .react-pie-inner svg .react-pie-segment {\n        cursor: pointer; }\n        .react-pie .react-pie-inner svg .react-pie-segment path {\n          transition-property: fill-opacity;\n          transition-timing-function: ease;\n          transition-duration: 0.5s;\n          transition-delay: 0.0s;\n          fill-opacity: 0.95;\n          stroke-width: 1.0; }\n          .react-pie .react-pie-inner svg .react-pie-segment path:hover {\n            fill-opacity: 0.7;\n            stroke-width: 2.0; }\n        .react-pie .react-pie-inner svg .react-pie-segment text {\n          pointer-events: none;\n          font-size: 10px;\n          fill: white; }\n  .react-pie .react-pie-tooltip-container {\n    transition-property: opacity;\n    transition-timing-function: ease;\n    transition-duration: 1.0s;\n    transition-delay: 0.0s;\n    pointer-events: none;\n    position: absolute;\n    opacity: 0;\n    height: 100%;\n    width: 100%;\n    left: 0;\n    top: 0; }\n    .react-pie .react-pie-tooltip-container.active {\n      opacity: 1; }\n    .react-pie .react-pie-tooltip-container .react-pie-tooltip {\n      background-color: #ededed !important;\n      border: 1px solid grey;\n      color: grey !important;\n      padding: 4px; }\n",""])},752:function(e,t,n){"use strict";var i=n(4),o=n(5),a=n(8),r=n(7),s=n(9),c=n(2),l=n(6),d=n(0),u=n.n(d),h=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(a.a)(this,Object(r.a)(t).call(this,e))).onMouseEnter=n.onMouseEnter.bind(Object(c.a)(Object(c.a)(n))),n.onMouseLeave=n.onMouseLeave.bind(Object(c.a)(Object(c.a)(n))),n.onMouseMove=n.onMouseMove.bind(Object(c.a)(Object(c.a)(n))),n.onClick=n.onClick.bind(Object(c.a)(Object(c.a)(n))),n.state={z:0},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"generatePathDef",value:function(e,t,n,i,o){var a=i+o,r={x:e.x+n*Math.cos(i),y:e.y+n*Math.sin(i)},s={x:e.x+n*Math.cos(a),y:e.y+n*Math.sin(a)},c={x:e.x+t*Math.cos(a),y:e.y+t*Math.sin(a)},l={x:e.x+t*Math.cos(i),y:e.y+t*Math.sin(i)},d=o>Math.PI?1:0;return"M".concat(r.x,",").concat(r.y)+" A".concat(n,",").concat(n," 0 ")+"".concat(d,",1 ").concat(s.x,",").concat(s.y)+" L".concat(c.x,",").concat(c.y)+" A".concat(t,",").concat(t," 0 ")+"".concat(d,",0 ").concat(l.x,",").concat(l.y)+" L".concat(r.x,",").concat(r.y," Z")}},{key:"onMouseEnter",value:function(e){this.setState({z:2})}},{key:"onMouseLeave",value:function(e){this.setState({z:1})}},{key:"onMouseMove",value:function(e){this.props.onMouseOver(e)}},{key:"onClick",value:function(e){this.props.onClick(e)}},{key:"render",value:function(){var e=this.props,t=e.fillColor,n=e.strokeColor,i=e.start,o=e.delta,a=e.rIn,r=e.rOut,s=e.centre,c=this.generatePathDef(s,a,r,i,o),l=a+.5*(r-a),d=i+.5*o,h={x:s.x+l*Math.cos(d)-5,y:s.y+l*Math.sin(d)+5},p={transform:"translate(".concat(h.x,"px, ").concat(h.y,"px)")};return u.a.createElement("g",{className:"react-pie-segment",z:this.state.z},u.a.createElement("path",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onClick:this.onClick,stroke:n,fill:t,d:c}),u.a.createElement("text",{style:p},this.props.label))}}]),t}(u.a.Component),p=n(471),v=n.n(p),f=n(81),m=n.n(f),b=n(45),g=n(53),O=n.n(g),y=(n(615),function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(a.a)(this,Object(r.a)(t).call(this,e))).disableTooltip=n.disableTooltip.bind(Object(c.a)(Object(c.a)(n)));var o={width:0,height:0},s=n.resizeSegments(n.loadSegments(e.data),o);return n.state={tooltipActive:!1,tooltip:"",segments:s,size:o},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.dataGuid!==this.props.dataGuid){var n=this.resizeSegments(this.loadSegments(e.data),this.state.size);this.animate({onUpdate:function(e){var i=n.map(function(t){return Object.assign({},t,{delta:t.delta*e})});t.setState(Object.assign({},t.state,{segments:i}))},duration:850})}}},{key:"loadSegments",value:function(e){var t=this,n=e.reduce(function(e,t){return t.value+e},0),i=0;return e.map(function(e,o){var a=2*Math.PI*e.value/n,r=Math.floor(100*e.value/n)+"%",s=e.strokeColor||t.props.strokeColor||e.color,c=e.key||t.guid(),l=i;i+=a;var d={x:Math.cos(l+.5*a),y:Math.sin(l+.5*a)};return{delta:a-.25*Math.PI/180,fillColor:e.color,value:e.value,color:e.color,expandTween:0,expanded:!1,strokeColor:s,label:r,index:o,start:l,dir:d,key:c}})}},{key:"resizeSegments",value:function(e,t){var n=this.props,i=n.innerRadius,o=n.outerRadius,a=t.width,r=t.height,s=.5*o*Math.min(a,r),c=.5*i*Math.min(a,r),l={y:.5*r,x:.5*a};return e.map(function(e){return Object.assign({},e,{rOut:s,rIn:c,centre:l})})}},{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxx-xxx-xxx",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return n}},{key:"animate",value:function(e){var t=e.onUpdate,n=e.duration,i=e.easing,o=new b.a,a=0;!function e(){if((a+=o.getElapsedMs())>n)t(1);else{var r=a/n,s=i?i(r,n/1e3):r;t(s)}a<n&&requestAnimationFrame(e)}()}},{key:"onSegmentMouseOver",value:function(e,t){var n=this.props.data[t.index];this.setState(Object.assign({},this.state,{tooltipActive:!0,tooltip:n.label})),this.props.onSegmentMouseOver&&this.props.onSegmentMouseOver(n)}},{key:"onSegmentClicked",value:function(e,t){var n=this,i=-1,o=-1,a=this.state.segments.map(function(e,n){var a=e.key===t.key&&!t.expanded;return e.expanded!==a&&(a?i=n:o=n),Object.assign({},e,{expanded:a})});if(this.animate({onUpdate:function(e){o>-1&&(a[o].expandTween=1-e),i>-1&&(a[i].expandTween=e),n.setState(Object.assign({},n.state,{segments:a}))},easing:function(e,t){return O.a.easeOutElastic(e,0,1,t)},duration:750}),this.props.onSegmentClicked){var r=this.props.data[t.index];this.props.onSegmentClicked(r,t.expanded)}}},{key:"expandSegment",value:function(e){var t=Math.PI/180*1.2*e.expandTween,n=.05*e.rOut*e.expandTween,i={x:e.centre.x+e.dir.x*n,y:e.centre.y+e.dir.y*n};return Object.assign({},e,{delta:e.delta-2*t,start:e.start+t,rOut:e.rOut+n,rIn:e.rIn+n,centre:i})}},{key:"disableTooltip",value:function(){this.setState(Object.assign({},this.state,{tooltipActive:!1}))}},{key:"render",value:function(){var e=this,t=this.state.segments.map(function(t){return t=t.expandTween?e.expandSegment(t):t,u.a.createElement(h,{strokeColor:t.strokeColor,onMouseOver:function(n){e.onSegmentMouseOver(n,t),n.stopPropagation()},fillColor:t.fillColor,onClick:function(n){e.onSegmentClicked(n,t)},centre:t.centre,delta:t.delta,start:t.start,label:t.label,rOut:t.rOut,rIn:t.rIn,key:t.key})}),n=this.state.tooltipActive?"react-pie-tooltip-container active":"react-pie-tooltip-container";return u.a.createElement(m.a,{bounds:!0,onResize:function(t){var n={height:t.bounds.height,width:t.bounds.width},i=e.resizeSegments(e.state.segments,n);e.setState(Object.assign({},e.state,{segments:i,size:n}))}},function(i){var o=i.measureRef;return u.a.createElement("div",{ref:o,className:"react-pie"},u.a.createElement("div",{className:"react-pie-inner",onMouseMove:e.disableTooltip,"data-for":"react-pie-tooltip","data-tip":""},u.a.createElement("svg",null,t)),u.a.createElement("div",{className:n},u.a.createElement(v.a,{getContent:[function(){return u.a.createElement("div",null,e.state.tooltip)}],className:"react-pie-tooltip",id:"react-pie-tooltip",effect:"float"})))})}}]),t}(u.a.Component));Object(l.a)(y,"defaultProps",{innerRadius:.35,outerRadius:.9,fillOpacity:.95,strokeWidth:1,data:[]});t.a=y}}]);
//# sourceMappingURL=17.7a715fa9.chunk.js.map