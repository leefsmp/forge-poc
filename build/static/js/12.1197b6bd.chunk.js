(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{314:function(e,t,n){"use strict";n.r(t);n(564);t.default="Viewing.Extension.DualViewer"},328:function(e,t,n){"use strict";var i=n(13),o=n(22),a=n(4),r=n(5),s=n(8),d=n(7),l=n(325),c=n(9),u=n(2),h=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).onModelCompletedLoad=n.onModelCompletedLoad.bind(Object(u.a)(Object(u.a)(n))),n.onObjectTreeCreated=n.onObjectTreeCreated.bind(Object(u.a)(Object(u.a)(n))),n.onModelRootLoaded=n.onModelRootLoaded.bind(Object(u.a)(Object(u.a)(n))),n.onExtensionLoaded=n.onExtensionLoaded.bind(Object(u.a)(Object(u.a)(n))),n.onModelActivated=n.onModelActivated.bind(Object(u.a)(Object(u.a)(n))),n.onGeometryLoaded=n.onGeometryLoaded.bind(Object(u.a)(Object(u.a)(n))),n.onToolbarCreated=n.onToolbarCreated.bind(Object(u.a)(Object(u.a)(n))),n.onModelBeginLoad=n.onModelBeginLoad.bind(Object(u.a)(Object(u.a)(n))),n.onModelUnloaded=n.onModelUnloaded.bind(Object(u.a)(Object(u.a)(n))),n.onSelection=n.onSelection.bind(Object(u.a)(Object(u.a)(n))),n.__onLoadNodeProperties=n.__onLoadNodeProperties.bind(Object(u.a)(Object(u.a)(n))),n.__onModelRootLoaded=n.__onModelRootLoaded.bind(Object(u.a)(Object(u.a)(n))),n.__onModelActivated=n.__onModelActivated.bind(Object(u.a)(Object(u.a)(n))),n.__onModelUnloaded=n.__onModelUnloaded.bind(Object(u.a)(Object(u.a)(n))),n.__onModelLoaded=n.__onModelLoaded.bind(Object(u.a)(Object(u.a)(n))),n.models=e.impl.modelQueue().getModels(),n.defaultOptions=r,n.options=Object(o.a)({},r,i),n.react=n.options.react,n.viewer=e,n.initializeEvents(),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"load",value:function(){return this.options.contextMenu&&this.onContextMenu&&this.options.contextMenu.addHandler(this.onContextMenu),!0}},{key:"unload",value:function(){var e=this;return this.options.contextMenu&&this.onContextMenu&&this.options.contextMenu.removeHandler(this.onContextMenu),this.viewerEvents.forEach(function(t){e.viewer.removeEventListener(t.id,e[t.handler])}),this.eventSink&&(this.eventSink.off("MetaProperties:loadNodeProperties",this.__onLoadNodeProperties),this.eventSink.off("model.activated",this.__onModelActivated),this.eventSink.off("model.unloaded",this.__onModelUnloaded),this.eventSink.off("model.loaded",this.__onModelLoaded)),this.off(),!0}},{key:"onExtensionLoaded",value:function(e){}},{key:"onModelBeginLoad",value:function(e){}},{key:"onModelActivated",value:function(e){}},{key:"__onModelRootLoaded",value:function(e){var t=this;this.viewerEvent([Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT]).then(function(e){t.onModelCompletedLoad(e[0])})}},{key:"onModelRootLoaded",value:function(e){}},{key:"onObjectTreeCreated",value:function(e){}},{key:"onGeometryLoaded",value:function(e){}},{key:"onModelCompletedLoad",value:function(e){}},{key:"onToolbarCreated",value:function(e){}},{key:"onModelUnloaded",value:function(e){}},{key:"onSelection",value:function(e){}},{key:"__onLoadNodeProperties",value:function(e){var t=e.dbId,n=e.properties;if(this.onLoadNodeProperties)return this.onLoadNodeProperties(t,n)}},{key:"__onModelLoaded",value:function(e){this.models=Object(i.a)(this.models).concat([e.model]),this.onModelBeginLoad(e)}},{key:"__onModelActivated",value:function(e){this.onModelActivated(e)}},{key:"__onModelUnloaded",value:function(e){this.models=this.models.filter(function(t){return t.guid!==e.model.guid}),this.onModelUnloaded(e)}},{key:"initializeEvents",value:function(){var e=this;this.options.eventSink&&(this.eventSink=this.options.eventSink,this.eventSink.on("MetaProperties:loadNodeProperties",this.__onLoadNodeProperties),this.eventSink.on("model.loaded",this.__onModelLoaded),this.eventSink.on("model.activated",this.__onModelActivated),this.eventSink.on("model.unloaded",this.__onModelUnloaded)),this.viewerEvents=[{id:Autodesk.Viewing.EXTENSION_LOADED_EVENT,handler:"onExtensionLoaded"},{id:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,handler:"onObjectTreeCreated"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"__onModelRootLoaded"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"onModelRootLoaded"},{id:Autodesk.Viewing.GEOMETRY_LOADED_EVENT,handler:"onGeometryLoaded"},{id:Autodesk.Viewing.TOOLBAR_CREATED_EVENT,handler:"onToolbarCreated"}],this.options.controlledSelection||this.viewerEvents.push({id:Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,handler:"onSelection"}),this.viewerEvents.forEach(function(t){e.viewerEvent(t.id,e[t.handler])})}},{key:"viewerEvent",value:function(e,t){var n=this;if(!t){var i=(Array.isArray(e)?e:[e]).map(function(e){return new Promise(function(t){n.viewer.addEventListener(e,function i(o){n.viewer.removeEventListener(e,i),t(o)})})});return Promise.all(i)}this.viewer.addEventListener(e,t)}},{key:"emit",value:function(e,n){return this.options.eventSink?this.options.eventSink.emit(e,n):Object(l.a)(Object(d.a)(t.prototype),"emit",this).call(this,e,n)}},{key:"emitAcc",value:function(e,n){return this.options.eventSink?this.options.eventSink.emitAcc(e,n):Object(l.a)(Object(d.a)(t.prototype),"emitAcc",this).call(this,e,n)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.MultiModelExtensionBase"}}]),t}(n(30).a.Composer(Autodesk.Viewing.Extension));t.a=h},333:function(e,t,n){var i=n(334);"string"===typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(21)(i,o);i.locals&&(e.exports=i.locals)},334:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".widget-container {\n  position: relative;\n  height: 100%;\n  width: 100%; }\n\n.widget-container > .title {\n  border-bottom: 1px solid #cdcdcd;\n  background-color: #f5f5f5;\n  padding-right: 10px;\n  color: black;\n  position: relative;\n  overflow: hidden;\n  text-align: left;\n  height: 40px;\n  width: 100%; }\n\n.widget-container > .title > label {\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px; }\n\n.widget-container > .content {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%; }\n",""])},336:function(e,t,n){"use strict";var i=n(13),o=n(4),a=n(5),r=n(8),s=n(7),d=n(9),l=n(6),c=(n(333),n(0)),u=n.n(c),h=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(a.a)(t,[{key:"renderTitle",value:function(){return this.props.showTitle?this.props.renderTitle?this.props.renderTitle():u.a.createElement("div",{className:"title"},u.a.createElement("label",null,this.props.title)):u.a.createElement("div",null)}},{key:"renderChildren",value:function(){var e=this;return this.props.dimensions?u.a.Children.map(this.props.children,function(t){var n=Object.assign({},t.props,{dimensions:e.props.dimensions});return u.a.cloneElement(t,n)}):this.props.children}},{key:"render",value:function(){var e=["widget-container"].concat(Object(i.a)(this.props.className.split(" "))),t=this.props.showTitle?"calc(100% - 40px)":"100%";return u.a.createElement("div",{className:e.join(" "),style:this.props.style},this.renderTitle(),u.a.createElement("div",{className:"content",style:{height:t}},this.renderChildren()))}}]),t}(u.a.PureComponent);Object(l.a)(h,"defaultProps",{showTitle:!0,className:""});var v=h;t.a=v},398:function(e,t,n){var i=n(28),o=n(425),a=n(127),r="Expected a function",s=Math.max,d=Math.min;e.exports=function(e,t,n){var l,c,u,h,v,p,f=0,w=!1,b=!1,m=!0;if("function"!=typeof e)throw new TypeError(r);function E(t){var n=l,i=c;return l=c=void 0,f=t,h=e.apply(i,n)}function O(e){var n=e-p;return void 0===p||n>=t||n<0||b&&e-f>=u}function k(){var e=o();if(O(e))return g(e);v=setTimeout(k,function(e){var n=t-(e-p);return b?d(n,u-(e-f)):n}(e))}function g(e){return v=void 0,m&&l?E(e):(l=c=void 0,h)}function j(){var e=o(),n=O(e);if(l=arguments,c=this,p=e,n){if(void 0===v)return function(e){return f=e,v=setTimeout(k,t),w?E(e):h}(p);if(b)return v=setTimeout(k,t),E(p)}return void 0===v&&(v=setTimeout(k,t)),h}return t=a(t)||0,i(n)&&(w=!!n.leading,u=(b="maxWait"in n)?s(a(n.maxWait)||0,t):u,m="trailing"in n?!!n.trailing:m),j.cancel=function(){void 0!==v&&clearTimeout(v),f=0,l=p=c=v=void 0},j.flush=function(){return void 0===v?h:g(o())},j}},424:function(e,t,n){var i=n(398),o=n(28),a="Expected a function";e.exports=function(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:r,maxWait:t,trailing:s})}},425:function(e,t,n){var i=n(26);e.exports=function(){return i.Date.now()}},564:function(e,t,n){"use strict";(function(e){var t=n(3),i=n.n(t),o=n(10),a=n(4),r=n(5),s=n(8),d=n(7),l=n(325),c=n(9),u=n(2),h=n(6),v=n(328),p=n(394),f=n.n(p),w=n(388),b=n.n(w),m=n(336),E=(n(565),n(424)),O=n.n(E),k=(n(45),n(101)),g=n(0),j=n.n(g),_=n(41),M=function(t){function n(t,i){var o;return Object(a.a)(this,n),o=Object(s.a)(this,Object(d.a)(n).call(this,t,i)),Object(h.a)(Object(u.a)(Object(u.a)(o)),"onDualViewerSelection",function(e){var t=e.selections.length?e.selections[0].dbIdArray:[],n=o.viewer.activeModel||o.viewer.model;!o.selection2Locked&&n.selector&&(o.selection1Locked=!0,n.selector.setSelection(t),o.selection1Locked=!1)}),Object(h.a)(Object(u.a)(Object(u.a)(o)),"renderTitle",function(){var e=o.react.getState(),t=e.items.map(function(e,t){return j.a.createElement(b.a,{eventKey:t,key:t,onClick:function(){o.setActiveView(e),o.pathIndex=t}},e.name)});return j.a.createElement("div",{className:"title"},j.a.createElement("label",null,o.options.title||"2D View"),j.a.createElement(f.a,{title:"View: "+e.activeView,disabled:e.disabled,key:"viewer-dropdown",id:"viewer-dropdown"},t))}),Object(h.a)(Object(u.a)(Object(u.a)(o)),"onStopResize",function(){var t=o.react.getState();e("#viewer-dropdown").parent().find("ul").css({height:Math.min(e(".dual-viewer").height()-42,26*t.items.length+16)}),o.dualViewer&&o.dualViewer.impl&&(o.dualViewer.resize(),o.dualViewer.fitToView())}),o.onResize=O()(o.onResize,100),o}return Object(c.a)(n,t),Object(r.a)(n,[{key:"load",value:function(){var e=this;return this.pathIndex=this.options.defaultPathIndex||0,console.log("Viewing.Extension.DualViewer loaded"),this.react.setState({disabled:!0,activeView:"",items:[]}).then(function(){e.react.pushRenderExtension(e)}),!0}},{key:"unload",value:function(){return console.log("Viewing.Extension.DualViewer unloaded"),this.dualViewer.model&&this.dualViewer.impl.unloadModel(this.dualViewer.model),this.dualViewer.tearDown(),this.react.popRenderExtension(this),Object(l.a)(Object(d.a)(n.prototype),"unload",this).call(this),!0}},{key:"getItems",value:function(){var e=Object(o.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.options.items){e.next=2;break}return e.abrupt("return",this.options.items);case 2:if(t=this.viewer.activeModel||this.viewer.model,n=this.options.urn||t.urn,e.t0=this.options.viewerDocument,e.t0){e.next=9;break}return e.next=8,Object(_.f)(n);case 8:e.t0=e.sent;case 9:return this.viewerDocument=e.t0,e.abrupt("return",Object(_.d)(this.viewerDocument,"2d"));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onViewerCreated",value:function(){var t=Object(o.a)(i.a.mark(function t(n){var o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.dualViewer=n,this.viewerModel=null,this.dualViewer.start(),t.next=6,this.getItems();case 6:if(!(o=t.sent).length){t.next=13;break}return t.next=10,this.react.setState({disabled:!1,items:o});case 10:this.setActiveView(o[this.pathIndex]),e("#viewer-dropdown").parent().find("ul").css({height:Math.min(e(".dual-viewer").height()-42,26*o.length)}),this.dualViewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onDualViewerSelection);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("Viewer Initialization Error:"),console.log(t.t0);case 19:case"end":return t.stop()}},t,this,[[0,15]])}));return function(e){return t.apply(this,arguments)}}()},{key:"onSelection",value:function(e){var t=e.selections.length?e.selections[0].dbIdArray:[],n=this.dualViewer.model;!this.selection1Locked&&n&&n.selector&&(this.selection2Locked=!0,n.selector.setSelection(t),this.selection2Locked=!1)}},{key:"setActiveView",value:function(){var e=Object(o.a)(i.a.mark(function e(t){var n,o,a=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.dualViewer.showLoader(!0),e.next=3,this.react.setState({activeView:t.name,disabled:!0});case 3:n=t.path||this.viewerDocument.getViewablePath(t),this.viewerModel&&this.dualViewer.impl.unloadModel(this.viewerModel),o={sharedPropertyDbPath:this.viewerDocument?this.viewerDocument.getPropertyDbPath():null},this.dualViewer.loadModel(n,o,function(e){a.dualViewer.fitToView(),a.dualViewer.showLoader(!1),a.viewerModel=e,a.react.setState({disabled:!1})},function(){a.dualViewer.showLoader(!1),a.viewerModel=null,a.react.setState({disabled:!1})});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onResize",value:function(){this.dualViewer&&this.dualViewer.impl&&this.dualViewer.resize()}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showTitle:!0};return j.a.createElement(m.a,{renderTitle:this.renderTitle,showTitle:t.showTitle,className:this.className},j.a.createElement(k.a,{flex:.4,onViewerCreated:function(t){clearTimeout(e.timeoutId),e.timeoutId=setTimeout(function(){return e.onViewerCreated(t)},250)},className:this.className}))}},{key:"className",get:function(){return"dual-viewer"}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.DualViewer"}}]),n}(v.a);Autodesk.Viewing.theExtensionManager.registerExtension(M.ExtensionId,M)}).call(this,n(18))},565:function(e,t,n){var i=n(566);"string"===typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(21)(i,o);i.locals&&(e.exports=i.locals)},566:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".dual-viewer .title {\n  overflow: visible;\n  float: left; }\n\n.dual-viewer .title > label {\n  white-space: nowrap;\n  font-weight: normal;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px;\n  select: none;\n  width: 80px; }\n\n.dual-viewer .title > .dropdown {\n  position: relative;\n  top: -1px; }\n\n.dual-viewer .title > .dropdown > button {\n  padding: 2px 12px; }\n\n.dual-viewer .title .dropdown-menu {\n  overflow: scroll; }\n",""])}}]);
//# sourceMappingURL=12.1197b6bd.chunk.js.map